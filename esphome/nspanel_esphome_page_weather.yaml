#####################################################################################################
##### NSPANEL ESPHOME created by Blackymas - https://github.com/Blackymas/NSPanel_HA_Blueprint  #####
##### ESPHOME CORE - Page weather                                                               #####
##### PLEASE only make changes if it is necessary and also the required knowledge is available. #####
##### For normal use with the Blueprint, no changes are necessary.                              #####
#####################################################################################################

---
substitutions:
  PAGE_WEATHER01_ID: 2
  PAGE_WEATHER02_ID: 3
  PAGE_WEATHER03_ID: 4
  PAGE_WEATHER04_ID: 5
  PAGE_WEATHER05_ID: 6
  TAG_PAGE_WEATHER: nspanel.page.weather

display:
  - id: !expand disp1
    on_touch:
      then:
        - lambda: |-
            if (touch_event) return;  // Ignore the touch, so only the release will be used
            if (page_id == hmi::home::PAGE.id and               // Page `home`
                system_flags.api_ready and                      // Is API available?
                (component_id == hmi::home::WEATHER.id or       // Outdoor temperature
                component_id == hmi::home::OUTDOOR_TEMP.id)) {  // Weather picture
              goto_page->execute(${PAGE_WEATHER01_ID});
              return;
            }

esphome:
  platformio_options:
    build_flags:
      - -D NSPANEL_HA_BLUEPRINT_PAGE_WEATHER

#script:
#  - id: !extend page_change
#    then:
#      - lambda: |-
#          switch (new_page_id) {
#            case ${PAGE_WEATHER01_ID}:
#              page_weather->execute(1);
#              break;
#            case ${PAGE_WEATHER02_ID}:
#              page_weather->execute(2);
#              break;
#            case ${PAGE_WEATHER03_ID}:
#              page_weather->execute(3);
#              break;
#            case ${PAGE_WEATHER04_ID}:
#              page_weather->execute(4);
#              break;
#            case ${PAGE_WEATHER05_ID}:
#              page_weather->execute(5);
#              break;
#          }

#  - id: !extend stop_page_constructors
#    then:
#      - lambda: |-
#          page_weather->stop();

#  - id: page_weather
#    mode: single
#    parameters:
#      page_number: uint
#    then:  # There's nothing here so far
...
